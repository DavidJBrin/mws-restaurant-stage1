{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/idb/lib/idb.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/js/dbhelper.js","webpack:///./src/js/lazysizes.min.js","webpack:///./src/js/main.js"],"names":["DBHelper","navigator","serviceWorker","Promise","resolve","DBPromised","idb","open","upgradeDb","createObjectStore","keyPath","callback","fetch","DATABASE_URL","then","response","ok","Error","statusText","json","db","tx","transaction","store","objectStore","forEach","restaurant","put","catch","getAll","restaurants","e","message","id","fetchRestaurants","error","find","r","cuisine","results","filter","cuisine_type","neighborhood","neighborhoods","map","v","i","uniqueNeighborhoods","indexOf","cuisines","uniqueCuisines","photograph","URL","marker","google","maps","Marker","position","latlng","title","name","url","urlForRestaurant","animation","Animation","DROP","port","a","b","c","document","lazySizes","module","exports","window","getElementsByClassName","d","documentElement","f","Date","g","HTMLPictureElement","h","j","k","setTimeout","l","requestAnimationFrame","m","requestIdleCallback","n","o","p","q","Array","prototype","RegExp","test","s","setAttribute","trim","t","replace","u","createEvent","instance","initCustomEvent","dispatchEvent","w","picturefill","pf","reevaluate","elements","src","x","getComputedStyle","y","offsetWidth","minSize","_lazysizesWidth","parentNode","z","length","shift","apply","arguments","push","hidden","_lsFlush","A","B","throttleDelay","ricTimeout","now","timeout","C","lazyClass","loadedClass","loadingClass","preloadClass","errorClass","autosizesClass","srcAttr","srcsetAttr","sizesAttr","customMedia","init","expFactor","hFac","loadMode","loadHidden","lazySizesConfig","lazysizesConfig","F","D","G","H","I","J","K","L","M","N","O","userAgent","P","Q","R","S","T","target","U","body","offsetParent","getBoundingClientRect","left","right","top","bottom","V","expand","clientHeight","clientWidth","_lazyRace","innerWidth","innerHeight","ba","preloadAfterLoad","W","X","Z","Y","$","contentWindow","location","_","aa","defaultPrevented","nodeName","firesLoad","clearTimeout","call","getElementsByTagName","complete","naturalWidth","srcset","detail","E","updateElem","ca","MutationObserver","observe","childList","subtree","attributes","setInterval","readyState","checkElems","unveil","dataAttr","width","cfg","autoSizer","loader","uP","aC","rC","hC","fire","gW","rAF","markers","registerServiceWorker","register","scope","console","log","err","openDatabase","addEventListener","event","fetchNeighborhoods","fetchCuisines","self","fillNeighborhoodsHTML","select","getElementById","option","createElement","innerHTML","value","append","fillCuisinesHTML","initMap","loc","lat","lng","Map","zoom","center","scrollwheel","updateRestaurants","cSelect","nSelect","cIndex","selectedIndex","nIndex","fetchRestaurantByCuisineAndNeighborhood","resetRestaurants","fillRestaurantsHTML","ul","setMap","createRestaurantHTML","addMarkersToMap","li","imageURL","imageUrlForRestaurant","imageExt","imageExtForURL","image","className","dataset","alt","address","more","href","mapMarkerForRestaurant","addListener"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;AClFA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAEA;AACA,CAAC;;;;;;;;;;;;AC3TD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;qjBCrBA;;;;AAIA;;;;;;;;IAEqBA,Q;;;;;;;mCACG;AACpB;AACA;AACA,UAAI,CAACC,UAAUC,aAAf,EAA8B;AAC5B,eAAOC,QAAQC,OAAR,EAAP;AACD;;AAED;AACA,WAAKC,UAAL,GAAkBC,cAAIC,IAAJ,CAAS,iBAAT,EAA4B,CAA5B,EAA+B,UAASC,SAAT,EAAoB;AACnEA,kBAAUC,iBAAV,CAA4B,aAA5B,EAA2C;AACzCC,mBAAS;AADgC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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/main.js\");\n","'use strict';\n\n(function() {\n  function toArray(arr) {\n    return Array.prototype.slice.call(arr);\n  }\n\n  function promisifyRequest(request) {\n    return new Promise(function(resolve, reject) {\n      request.onsuccess = function() {\n        resolve(request.result);\n      };\n\n      request.onerror = function() {\n        reject(request.error);\n      };\n    });\n  }\n\n  function promisifyRequestCall(obj, method, args) {\n    var request;\n    var p = new Promise(function(resolve, reject) {\n      request = obj[method].apply(obj, args);\n      promisifyRequest(request).then(resolve, reject);\n    });\n\n    p.request = request;\n    return p;\n  }\n\n  function promisifyCursorRequestCall(obj, method, args) {\n    var p = promisifyRequestCall(obj, method, args);\n    return p.then(function(value) {\n      if (!value) return;\n      return new Cursor(value, p.request);\n    });\n  }\n\n  function proxyProperties(ProxyClass, targetProp, properties) {\n    properties.forEach(function(prop) {\n      Object.defineProperty(ProxyClass.prototype, prop, {\n        get: function() {\n          return this[targetProp][prop];\n        },\n        set: function(val) {\n          this[targetProp][prop] = val;\n        }\n      });\n    });\n  }\n\n  function proxyRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return promisifyRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function proxyMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return this[targetProp][prop].apply(this[targetProp], arguments);\n      };\n    });\n  }\n\n  function proxyCursorRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return promisifyCursorRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function Index(index) {\n    this._index = index;\n  }\n\n  proxyProperties(Index, '_index', [\n    'name',\n    'keyPath',\n    'multiEntry',\n    'unique'\n  ]);\n\n  proxyRequestMethods(Index, '_index', IDBIndex, [\n    'get',\n    'getKey',\n    'getAll',\n    'getAllKeys',\n    'count'\n  ]);\n\n  proxyCursorRequestMethods(Index, '_index', IDBIndex, [\n    'openCursor',\n    'openKeyCursor'\n  ]);\n\n  function Cursor(cursor, request) {\n    this._cursor = cursor;\n    this._request = request;\n  }\n\n  proxyProperties(Cursor, '_cursor', [\n    'direction',\n    'key',\n    'primaryKey',\n    'value'\n  ]);\n\n  proxyRequestMethods(Cursor, '_cursor', IDBCursor, [\n    'update',\n    'delete'\n  ]);\n\n  // proxy 'next' methods\n  ['advance', 'continue', 'continuePrimaryKey'].forEach(function(methodName) {\n    if (!(methodName in IDBCursor.prototype)) return;\n    Cursor.prototype[methodName] = function() {\n      var cursor = this;\n      var args = arguments;\n      return Promise.resolve().then(function() {\n        cursor._cursor[methodName].apply(cursor._cursor, args);\n        return promisifyRequest(cursor._request).then(function(value) {\n          if (!value) return;\n          return new Cursor(value, cursor._request);\n        });\n      });\n    };\n  });\n\n  function ObjectStore(store) {\n    this._store = store;\n  }\n\n  ObjectStore.prototype.createIndex = function() {\n    return new Index(this._store.createIndex.apply(this._store, arguments));\n  };\n\n  ObjectStore.prototype.index = function() {\n    return new Index(this._store.index.apply(this._store, arguments));\n  };\n\n  proxyProperties(ObjectStore, '_store', [\n    'name',\n    'keyPath',\n    'indexNames',\n    'autoIncrement'\n  ]);\n\n  proxyRequestMethods(ObjectStore, '_store', IDBObjectStore, [\n    'put',\n    'add',\n    'delete',\n    'clear',\n    'get',\n    'getAll',\n    'getKey',\n    'getAllKeys',\n    'count'\n  ]);\n\n  proxyCursorRequestMethods(ObjectStore, '_store', IDBObjectStore, [\n    'openCursor',\n    'openKeyCursor'\n  ]);\n\n  proxyMethods(ObjectStore, '_store', IDBObjectStore, [\n    'deleteIndex'\n  ]);\n\n  function Transaction(idbTransaction) {\n    this._tx = idbTransaction;\n    this.complete = new Promise(function(resolve, reject) {\n      idbTransaction.oncomplete = function() {\n        resolve();\n      };\n      idbTransaction.onerror = function() {\n        reject(idbTransaction.error);\n      };\n      idbTransaction.onabort = function() {\n        reject(idbTransaction.error);\n      };\n    });\n  }\n\n  Transaction.prototype.objectStore = function() {\n    return new ObjectStore(this._tx.objectStore.apply(this._tx, arguments));\n  };\n\n  proxyProperties(Transaction, '_tx', [\n    'objectStoreNames',\n    'mode'\n  ]);\n\n  proxyMethods(Transaction, '_tx', IDBTransaction, [\n    'abort'\n  ]);\n\n  function UpgradeDB(db, oldVersion, transaction) {\n    this._db = db;\n    this.oldVersion = oldVersion;\n    this.transaction = new Transaction(transaction);\n  }\n\n  UpgradeDB.prototype.createObjectStore = function() {\n    return new ObjectStore(this._db.createObjectStore.apply(this._db, arguments));\n  };\n\n  proxyProperties(UpgradeDB, '_db', [\n    'name',\n    'version',\n    'objectStoreNames'\n  ]);\n\n  proxyMethods(UpgradeDB, '_db', IDBDatabase, [\n    'deleteObjectStore',\n    'close'\n  ]);\n\n  function DB(db) {\n    this._db = db;\n  }\n\n  DB.prototype.transaction = function() {\n    return new Transaction(this._db.transaction.apply(this._db, arguments));\n  };\n\n  proxyProperties(DB, '_db', [\n    'name',\n    'version',\n    'objectStoreNames'\n  ]);\n\n  proxyMethods(DB, '_db', IDBDatabase, [\n    'close'\n  ]);\n\n  // Add cursor iterators\n  // TODO: remove this once browsers do the right thing with promises\n  ['openCursor', 'openKeyCursor'].forEach(function(funcName) {\n    [ObjectStore, Index].forEach(function(Constructor) {\n      // Don't create iterateKeyCursor if openKeyCursor doesn't exist.\n      if (!(funcName in Constructor.prototype)) return;\n\n      Constructor.prototype[funcName.replace('open', 'iterate')] = function() {\n        var args = toArray(arguments);\n        var callback = args[args.length - 1];\n        var nativeObject = this._store || this._index;\n        var request = nativeObject[funcName].apply(nativeObject, args.slice(0, -1));\n        request.onsuccess = function() {\n          callback(request.result);\n        };\n      };\n    });\n  });\n\n  // polyfill getAll\n  [Index, ObjectStore].forEach(function(Constructor) {\n    if (Constructor.prototype.getAll) return;\n    Constructor.prototype.getAll = function(query, count) {\n      var instance = this;\n      var items = [];\n\n      return new Promise(function(resolve) {\n        instance.iterateCursor(query, function(cursor) {\n          if (!cursor) {\n            resolve(items);\n            return;\n          }\n          items.push(cursor.value);\n\n          if (count !== undefined && items.length == count) {\n            resolve(items);\n            return;\n          }\n          cursor.continue();\n        });\n      });\n    };\n  });\n\n  var exp = {\n    open: function(name, version, upgradeCallback) {\n      var p = promisifyRequestCall(indexedDB, 'open', [name, version]);\n      var request = p.request;\n\n      if (request) {\n        request.onupgradeneeded = function(event) {\n          if (upgradeCallback) {\n            upgradeCallback(new UpgradeDB(request.result, event.oldVersion, request.transaction));\n          }\n        };\n      }\n\n      return p.then(function(db) {\n        return new DB(db);\n      });\n    },\n    delete: function(name) {\n      return promisifyRequestCall(indexedDB, 'deleteDatabase', [name]);\n    }\n  };\n\n  if (typeof module !== 'undefined') {\n    module.exports = exp;\n    module.exports.default = module.exports;\n  }\n  else {\n    self.idb = exp;\n  }\n}());\n","module.exports = function(module) {\r\n\tif (!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif (!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n","/**\r\n * Common database helper functions.\r\n */\r\n\r\nimport idb from  'idb';\r\n\r\nexport default class DBHelper {\r\n  static openDatabase() {\r\n    // If the browser doesn't support service worker,\r\n    // we don't care about having a database\r\n    if (!navigator.serviceWorker) {\r\n      return Promise.resolve();\r\n    }\r\n    \r\n    // Create the database and makesure the object store is unique on id so we don't add duplicates.\r\n    this.DBPromised = idb.open('mws-restaurants', 1, function(upgradeDb) {\r\n      upgradeDb.createObjectStore('restaurants', {\r\n        keyPath: 'id'\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Database URL.\r\n   * Change this to restaurants.json file location on your server.\r\n   */\r\n  static get DATABASE_URL() {\r\n    const port = 1337 // Change this to your server port\r\n    // return `http://httpstat.us/502`;\r\n    return `http://localhost:${port}/restaurants/`;\r\n  }\r\n\r\n  /**\r\n   * Fetch all restaurants.\r\n   */\r\n  static fetchRestaurants(callback) {\r\n    // let xhr = new XMLHttpRequest();\r\n    // xhr.open('GET', DBHelper.DATABASE_URL);\r\n    // xhr.onload = () => {\r\n    //   if (xhr.status === 200) { // Got a success response from server!\r\n    //     const json = JSON.parse(xhr.responseText);\r\n    //     callback(null, json);\r\n    //   } else { // Oops!. Got an error from server.\r\n    //     const error = (`Request failed. Returned status of ${xhr.status}`);\r\n    //     callback(error, null);\r\n    //   }\r\n    // };\r\n    // xhr.send();\r\n\r\n    fetch(DBHelper.DATABASE_URL)\r\n      .then(response => {\r\n        if (!response.ok) {\r\n          throw Error(response.statusText);\r\n        }\r\n        return response.json().then((json) => {\r\n          DBHelper.DBPromised.then((db) => {\r\n            if (!db) return;\r\n\r\n            const tx = db.transaction('restaurants','readwrite');\r\n            const store = tx.objectStore('restaurants');\r\n            json.forEach((restaurant) => {\r\n              store.put(restaurant);\r\n            })\r\n          });\r\n\r\n          callback(null, json);\r\n        });\r\n      })\r\n      .catch(e => {\r\n        DBHelper.DBPromised.then(db => {\r\n          const store = db.transaction('restaurants').objectStore('restaurants');\r\n\r\n          store.getAll()\r\n            .then(restaurants => {\r\n              if (!restaurants) callback(e.message, null);\r\n              callback(null, restaurants);\r\n            });\r\n        });\r\n        callback(`An error occurred: ${e.message}`, null);\r\n      });\r\n\r\n  }\r\n\r\n  /**\r\n   * Fetch a restaurant by its ID.\r\n   */\r\n  static fetchRestaurantById(id, callback) {\r\n    // fetch all restaurants with proper error handling.\r\n    DBHelper.fetchRestaurants((error, restaurants) => {\r\n      if (error) {\r\n        callback(error, null);\r\n      } else {\r\n        const restaurant = restaurants.find(r => r.id == id);\r\n        if (restaurant) { // Got the restaurant\r\n          callback(null, restaurant);\r\n        } else { // Restaurant does not exist in the database\r\n          callback('Restaurant does not exist', null);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Fetch restaurants by a cuisine type with proper error handling.\r\n   */\r\n  static fetchRestaurantByCuisine(cuisine, callback) {\r\n    // Fetch all restaurants  with proper error handling\r\n    DBHelper.fetchRestaurants((error, restaurants) => {\r\n      if (error) {\r\n        callback(error, null);\r\n      } else {\r\n        // Filter restaurants to have only given cuisine type\r\n        const results = restaurants.filter(r => r.cuisine_type == cuisine);\r\n        callback(null, results);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Fetch restaurants by a neighborhood with proper error handling.\r\n   */\r\n  static fetchRestaurantByNeighborhood(neighborhood, callback) {\r\n    // Fetch all restaurants\r\n    DBHelper.fetchRestaurants((error, restaurants) => {\r\n      if (error) {\r\n        callback(error, null);\r\n      } else {\r\n        // Filter restaurants to have only given neighborhood\r\n        const results = restaurants.filter(r => r.neighborhood == neighborhood);\r\n        callback(null, results);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Fetch restaurants by a cuisine and a neighborhood with proper error handling.\r\n   */\r\n  static fetchRestaurantByCuisineAndNeighborhood(cuisine, neighborhood, callback) {\r\n    // Fetch all restaurants\r\n    DBHelper.fetchRestaurants((error, restaurants) => {\r\n      if (error) {\r\n        callback(error, null);\r\n      } else {\r\n        let results = restaurants\r\n        if (cuisine != 'all') { // filter by cuisine\r\n          results = results.filter(r => r.cuisine_type == cuisine);\r\n        }\r\n        if (neighborhood != 'all') { // filter by neighborhood\r\n          results = results.filter(r => r.neighborhood == neighborhood);\r\n        }\r\n        callback(null, results);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Fetch all neighborhoods with proper error handling.\r\n   */\r\n  static fetchNeighborhoods(callback) {\r\n    // Fetch all restaurants\r\n    DBHelper.fetchRestaurants((error, restaurants) => {\r\n      if (error) {\r\n        callback(error, null);\r\n      } else {\r\n        // Get all neighborhoods from all restaurants\r\n        const neighborhoods = restaurants.map((v, i) => restaurants[i].neighborhood)\r\n        // Remove duplicates from neighborhoods\r\n        const uniqueNeighborhoods = neighborhoods.filter((v, i) => neighborhoods.indexOf(v) == i)\r\n        callback(null, uniqueNeighborhoods);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Fetch all cuisines with proper error handling.\r\n   */\r\n  static fetchCuisines(callback) {\r\n    // Fetch all restaurants\r\n    DBHelper.fetchRestaurants((error, restaurants) => {\r\n      if (error) {\r\n        callback(error, null);\r\n      } else {\r\n        // Get all cuisines from all restaurants\r\n        const cuisines = restaurants.map((v, i) => restaurants[i].cuisine_type)\r\n        // Remove duplicates from cuisines\r\n        const uniqueCuisines = cuisines.filter((v, i) => cuisines.indexOf(v) == i)\r\n        callback(null, uniqueCuisines);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Restaurant page URL.\r\n   */\r\n  static urlForRestaurant(restaurant) {\r\n    return (`./restaurant.html?id=${restaurant.id}`);\r\n  }\r\n\r\n  /**\r\n   * Restaurant image URL.\r\n   */\r\n  static imageUrlForRestaurant(restaurant) {\r\n    if (restaurant.photograph) return (`/img/${restaurant.photograph}`);\r\n    return `/img/default`;\r\n  }\r\n\r\n  static imageExtForURL(URL) {\r\n    if (URL === '/img/default') return 'png';\r\n    return 'jpg';\r\n  }\r\n  /**\r\n   * Map marker for a restaurant.\r\n   */\r\n  static mapMarkerForRestaurant(restaurant, map) {\r\n    const marker = new google.maps.Marker({\r\n      position: restaurant.latlng,\r\n      title: restaurant.name,\r\n      url: DBHelper.urlForRestaurant(restaurant),\r\n      map: map,\r\n      animation: google.maps.Animation.DROP}\r\n    );\r\n    return marker;\r\n  }\r\n}","/*! lazysizes - v4.0.3 */\r\n!function(a,b){var c=b(a,a.document);a.lazySizes=c,\"object\"==typeof module&&module.exports&&(module.exports=c)}(window,function(a,b){\"use strict\";if(b.getElementsByClassName){var c,d,e=b.documentElement,f=a.Date,g=a.HTMLPictureElement,h=\"addEventListener\",i=\"getAttribute\",j=a[h],k=a.setTimeout,l=a.requestAnimationFrame||k,m=a.requestIdleCallback,n=/^picture$/i,o=[\"load\",\"error\",\"lazyincluded\",\"_lazyloaded\"],p={},q=Array.prototype.forEach,r=function(a,b){return p[b]||(p[b]=new RegExp(\"(\\\\s|^)\"+b+\"(\\\\s|$)\")),p[b].test(a[i](\"class\")||\"\")&&p[b]},s=function(a,b){r(a,b)||a.setAttribute(\"class\",(a[i](\"class\")||\"\").trim()+\" \"+b)},t=function(a,b){var c;(c=r(a,b))&&a.setAttribute(\"class\",(a[i](\"class\")||\"\").replace(c,\" \"))},u=function(a,b,c){var d=c?h:\"removeEventListener\";c&&u(a,b),o.forEach(function(c){a[d](c,b)})},v=function(a,d,e,f,g){var h=b.createEvent(\"CustomEvent\");return e||(e={}),e.instance=c,h.initCustomEvent(d,!f,!g,e),a.dispatchEvent(h),h},w=function(b,c){var e;!g&&(e=a.picturefill||d.pf)?e({reevaluate:!0,elements:[b]}):c&&c.src&&(b.src=c.src)},x=function(a,b){return(getComputedStyle(a,null)||{})[b]},y=function(a,b,c){for(c=c||a.offsetWidth;c<d.minSize&&b&&!a._lazysizesWidth;)c=b.offsetWidth,b=b.parentNode;return c},z=function(){var a,c,d=[],e=[],f=d,g=function(){var b=f;for(f=d.length?e:d,a=!0,c=!1;b.length;)b.shift()();a=!1},h=function(d,e){a&&!e?d.apply(this,arguments):(f.push(d),c||(c=!0,(b.hidden?k:l)(g)))};return h._lsFlush=g,h}(),A=function(a,b){return b?function(){z(a)}:function(){var b=this,c=arguments;z(function(){a.apply(b,c)})}},B=function(a){var b,c=0,e=d.throttleDelay,g=d.ricTimeout,h=function(){b=!1,c=f.now(),a()},i=m&&g>49?function(){m(h,{timeout:g}),g!==d.ricTimeout&&(g=d.ricTimeout)}:A(function(){k(h)},!0);return function(a){var d;(a=a===!0)&&(g=33),b||(b=!0,d=e-(f.now()-c),0>d&&(d=0),a||9>d?i():k(i,d))}},C=function(a){var b,c,d=99,e=function(){b=null,a()},g=function(){var a=f.now()-c;d>a?k(g,d-a):(m||e)(e)};return function(){c=f.now(),b||(b=k(g,d))}};!function(){var b,c={lazyClass:\"lazyload\",loadedClass:\"lazyloaded\",loadingClass:\"lazyloading\",preloadClass:\"lazypreload\",errorClass:\"lazyerror\",autosizesClass:\"lazyautosizes\",srcAttr:\"data-src\",srcsetAttr:\"data-srcset\",sizesAttr:\"data-sizes\",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};d=a.lazySizesConfig||a.lazysizesConfig||{};for(b in c)b in d||(d[b]=c[b]);a.lazySizesConfig=d,k(function(){d.init&&F()})}();var D=function(){var g,l,m,o,p,y,D,F,G,H,I,J,K,L,M=/^img$/i,N=/^iframe$/i,O=\"onscroll\"in a&&!/glebot/.test(navigator.userAgent),P=0,Q=0,R=0,S=-1,T=function(a){R--,a&&a.target&&u(a.target,T),(!a||0>R||!a.target)&&(R=0)},U=function(a,c){var d,f=a,g=\"hidden\"==x(b.body,\"visibility\")||\"hidden\"!=x(a,\"visibility\");for(F-=c,I+=c,G-=c,H+=c;g&&(f=f.offsetParent)&&f!=b.body&&f!=e;)g=(x(f,\"opacity\")||1)>0,g&&\"visible\"!=x(f,\"overflow\")&&(d=f.getBoundingClientRect(),g=H>d.left&&G<d.right&&I>d.top-1&&F<d.bottom+1);return g},V=function(){var a,f,h,j,k,m,n,p,q,r=c.elements;if((o=d.loadMode)&&8>R&&(a=r.length)){f=0,S++,null==K&&(\"expand\"in d||(d.expand=e.clientHeight>500&&e.clientWidth>500?500:370),J=d.expand,K=J*d.expFactor),K>Q&&1>R&&S>2&&o>2&&!b.hidden?(Q=K,S=0):Q=o>1&&S>1&&6>R?J:P;for(;a>f;f++)if(r[f]&&!r[f]._lazyRace)if(O)if((p=r[f][i](\"data-expand\"))&&(m=1*p)||(m=Q),q!==m&&(y=innerWidth+m*L,D=innerHeight+m,n=-1*m,q=m),h=r[f].getBoundingClientRect(),(I=h.bottom)>=n&&(F=h.top)<=D&&(H=h.right)>=n*L&&(G=h.left)<=y&&(I||H||G||F)&&(d.loadHidden||\"hidden\"!=x(r[f],\"visibility\"))&&(l&&3>R&&!p&&(3>o||4>S)||U(r[f],m))){if(ba(r[f]),k=!0,R>9)break}else!k&&l&&!j&&4>R&&4>S&&o>2&&(g[0]||d.preloadAfterLoad)&&(g[0]||!p&&(I||H||G||F||\"auto\"!=r[f][i](d.sizesAttr)))&&(j=g[0]||r[f]);else ba(r[f]);j&&!k&&ba(j)}},W=B(V),X=function(a){s(a.target,d.loadedClass),t(a.target,d.loadingClass),u(a.target,Z),v(a.target,\"lazyloaded\")},Y=A(X),Z=function(a){Y({target:a.target})},$=function(a,b){try{a.contentWindow.location.replace(b)}catch(c){a.src=b}},_=function(a){var b,c=a[i](d.srcsetAttr);(b=d.customMedia[a[i](\"data-media\")||a[i](\"media\")])&&a.setAttribute(\"media\",b),c&&a.setAttribute(\"srcset\",c)},aa=A(function(a,b,c,e,f){var g,h,j,l,o,p;(o=v(a,\"lazybeforeunveil\",b)).defaultPrevented||(e&&(c?s(a,d.autosizesClass):a.setAttribute(\"sizes\",e)),h=a[i](d.srcsetAttr),g=a[i](d.srcAttr),f&&(j=a.parentNode,l=j&&n.test(j.nodeName||\"\")),p=b.firesLoad||\"src\"in a&&(h||g||l),o={target:a},p&&(u(a,T,!0),clearTimeout(m),m=k(T,2500),s(a,d.loadingClass),u(a,Z,!0)),l&&q.call(j.getElementsByTagName(\"source\"),_),h?a.setAttribute(\"srcset\",h):g&&!l&&(N.test(a.nodeName)?$(a,g):a.src=g),f&&(h||l)&&w(a,{src:g})),a._lazyRace&&delete a._lazyRace,t(a,d.lazyClass),z(function(){(!p||a.complete&&a.naturalWidth>1)&&(p?T(o):R--,X(o))},!0)}),ba=function(a){var b,c=M.test(a.nodeName),e=c&&(a[i](d.sizesAttr)||a[i](\"sizes\")),f=\"auto\"==e;(!f&&l||!c||!a[i](\"src\")&&!a.srcset||a.complete||r(a,d.errorClass)||!r(a,d.lazyClass))&&(b=v(a,\"lazyunveilread\").detail,f&&E.updateElem(a,!0,a.offsetWidth),a._lazyRace=!0,R++,aa(a,b,f,e,c))},ca=function(){if(!l){if(f.now()-p<999)return void k(ca,999);var a=C(function(){d.loadMode=3,W()});l=!0,d.loadMode=3,W(),j(\"scroll\",function(){3==d.loadMode&&(d.loadMode=2),a()},!0)}};return{_:function(){p=f.now(),c.elements=b.getElementsByClassName(d.lazyClass),g=b.getElementsByClassName(d.lazyClass+\" \"+d.preloadClass),L=d.hFac,j(\"scroll\",W,!0),j(\"resize\",W,!0),a.MutationObserver?new MutationObserver(W).observe(e,{childList:!0,subtree:!0,attributes:!0}):(e[h](\"DOMNodeInserted\",W,!0),e[h](\"DOMAttrModified\",W,!0),setInterval(W,999)),j(\"hashchange\",W,!0),[\"focus\",\"mouseover\",\"click\",\"load\",\"transitionend\",\"animationend\",\"webkitAnimationEnd\"].forEach(function(a){b[h](a,W,!0)}),/d$|^c/.test(b.readyState)?ca():(j(\"load\",ca),b[h](\"DOMContentLoaded\",W),k(ca,2e4)),c.elements.length?(V(),z._lsFlush()):W()},checkElems:W,unveil:ba}}(),E=function(){var a,c=A(function(a,b,c,d){var e,f,g;if(a._lazysizesWidth=d,d+=\"px\",a.setAttribute(\"sizes\",d),n.test(b.nodeName||\"\"))for(e=b.getElementsByTagName(\"source\"),f=0,g=e.length;g>f;f++)e[f].setAttribute(\"sizes\",d);c.detail.dataAttr||w(a,c.detail)}),e=function(a,b,d){var e,f=a.parentNode;f&&(d=y(a,f,d),e=v(a,\"lazybeforesizes\",{width:d,dataAttr:!!b}),e.defaultPrevented||(d=e.detail.width,d&&d!==a._lazysizesWidth&&c(a,f,e,d)))},f=function(){var b,c=a.length;if(c)for(b=0;c>b;b++)e(a[b])},g=C(f);return{_:function(){a=b.getElementsByClassName(d.autosizesClass),j(\"resize\",g)},checkElems:g,updateElem:e}}(),F=function(){F.i||(F.i=!0,E._(),D._())};return c={cfg:d,autoSizer:E,loader:D,init:F,uP:w,aC:s,rC:t,hC:r,fire:v,gW:y,rAF:z}}});","import DBHelper from './dbhelper';\r\nimport './lazysizes.min.js';\r\n\r\nlet restaurants,\r\n  neighborhoods,\r\n  cuisines;\r\nvar map;\r\nvar markers = [];\r\n\r\nconst registerServiceWorker = () => {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.register('/sw.js', {scope: '/'})\r\n      .then(() => console.log('Service Worker Registered!'))\r\n      .catch((err) => console.log('Service Worker Registration Error!',err));\r\n  }\r\n};\r\n\r\n/**\r\n *  Register the service worker\r\n **/\r\nregisterServiceWorker();\r\n\r\n/**\r\n * Open the IndexedDB database using IndexedDB\r\n */\r\nDBHelper.openDatabase();\r\n\r\n/**\r\n * Fetch neighborhoods and cuisines as soon as the page is loaded.\r\n */\r\ndocument.addEventListener('DOMContentLoaded', (event) => {\r\n  fetchNeighborhoods();\r\n  fetchCuisines();\r\n});\r\n\r\n/**\r\n * Fetch all neighborhoods and set their HTML.\r\n */\r\nconst fetchNeighborhoods = () => {\r\n  DBHelper.fetchNeighborhoods((error, neighborhoods) => {\r\n    if (error) { // Got an error\r\n      console.error(error);\r\n    } else {\r\n      self.neighborhoods = neighborhoods;\r\n      fillNeighborhoodsHTML();\r\n    }\r\n  });\r\n};\r\n\r\n/**\r\n * Set neighborhoods HTML.\r\n */\r\nconst fillNeighborhoodsHTML = (neighborhoods = self.neighborhoods) => {\r\n  const select = document.getElementById('neighborhoods-select');\r\n  neighborhoods.forEach(neighborhood => {\r\n    const option = document.createElement('option');\r\n    option.innerHTML = neighborhood;\r\n    option.value = neighborhood;\r\n    select.append(option);\r\n  });\r\n};\r\n\r\n/**\r\n * Fetch all cuisines and set their HTML.\r\n */\r\nconst fetchCuisines = () => {\r\n  DBHelper.fetchCuisines((error, cuisines) => {\r\n    if (error) { // Got an error!\r\n      console.error(error);\r\n    } else {\r\n      self.cuisines = cuisines;\r\n      fillCuisinesHTML();\r\n    }\r\n  });\r\n};\r\n\r\n/**\r\n * Set cuisines HTML.\r\n */\r\nconst fillCuisinesHTML = (cuisines = self.cuisines) => {\r\n  const select = document.getElementById('cuisines-select');\r\n\r\n  cuisines.forEach(cuisine => {\r\n    const option = document.createElement('option');\r\n    option.innerHTML = cuisine;\r\n    option.value = cuisine;\r\n    select.append(option);\r\n  });\r\n};\r\n\r\n/**\r\n * Initialize Google map, called from HTML.\r\n */\r\nwindow.initMap = () => {\r\n  let loc = {\r\n    lat: 40.722216,\r\n    lng: -73.987501\r\n  };\r\n  self.map = new google.maps.Map(document.getElementById('map'), {\r\n    zoom: 12,\r\n    center: loc,\r\n    scrollwheel: false\r\n  });\r\n  updateRestaurants();\r\n};\r\n\r\n/**\r\n * Update page and map for current restaurants.\r\n */\r\nconst updateRestaurants = () => {\r\n  const cSelect = document.getElementById('cuisines-select');\r\n  const nSelect = document.getElementById('neighborhoods-select');\r\n\r\n  const cIndex = cSelect.selectedIndex;\r\n  const nIndex = nSelect.selectedIndex;\r\n\r\n  const cuisine = cSelect[cIndex].value;\r\n  const neighborhood = nSelect[nIndex].value;\r\n\r\n  DBHelper.fetchRestaurantByCuisineAndNeighborhood(cuisine, neighborhood, (error, restaurants) => {\r\n    if (error) { // Got an error!\r\n      console.error(error);\r\n    } else {\r\n      resetRestaurants(restaurants);\r\n      fillRestaurantsHTML();\r\n    }\r\n  })\r\n};\r\n\r\n/**\r\n * Clear current restaurants, their HTML and remove their map markers.\r\n */\r\nconst resetRestaurants = (restaurants) => {\r\n  // Remove all restaurants\r\n  self.restaurants = [];\r\n  const ul = document.getElementById('restaurants-list');\r\n  ul.innerHTML = '';\r\n\r\n  // Remove all map markers\r\n  if (self.markers) {\r\n    self.markers.forEach(m => m.setMap(null));\r\n  }\r\n  self.markers = [];\r\n  self.restaurants = restaurants;\r\n};\r\n\r\n/**\r\n * Create all restaurants HTML and add them to the webpage.\r\n */\r\nconst fillRestaurantsHTML = (restaurants = self.restaurants) => {\r\n  const ul = document.getElementById('restaurants-list');\r\n  restaurants.forEach(restaurant => {\r\n    ul.append(createRestaurantHTML(restaurant));\r\n  });\r\n  addMarkersToMap();\r\n};\r\n\r\n/**\r\n * Create restaurant HTML.\r\n */\r\nconst createRestaurantHTML = (restaurant) => {\r\n  const li = document.createElement('li');\r\n  const imageURL = DBHelper.imageUrlForRestaurant(restaurant);\r\n  const imageExt = DBHelper.imageExtForURL(imageURL);\r\n\r\n  const image = document.createElement('img');\r\n  image.className = 'restaurant-img lazyload';\r\n  image.dataset.srcset = `${imageURL}-small.${imageExt} 1x, ${imageURL}-large.${imageExt} 2x`;\r\n  image.alt = `An image of ${restaurant.name}`;\r\n  li.append(image);\r\n\r\n  const name = document.createElement('h1');\r\n  name.innerHTML = restaurant.name;\r\n  li.append(name);\r\n\r\n  const neighborhood = document.createElement('p');\r\n  neighborhood.innerHTML = restaurant.neighborhood;\r\n  li.append(neighborhood);\r\n\r\n  const address = document.createElement('p');\r\n  address.innerHTML = restaurant.address;\r\n  li.append(address);\r\n\r\n  const more = document.createElement('a');\r\n  more.innerHTML = 'View Details';\r\n  more.href = DBHelper.urlForRestaurant(restaurant);\r\n  more.setAttribute('aria-label', `View Details Of ${restaurant.name}`)\r\n  li.append(more)\r\n\r\n  return li\r\n};\r\n\r\n/**\r\n * Add markers for current restaurants to the map.\r\n */\r\nconst addMarkersToMap = (restaurants = self.restaurants) => {\r\n  restaurants.forEach(restaurant => {\r\n    // Add marker to the map\r\n    const marker = DBHelper.mapMarkerForRestaurant(restaurant, self.map);\r\n    google.maps.event.addListener(marker, 'click', () => {\r\n      window.location.href = marker.url\r\n    });\r\n    self.markers.push(marker);\r\n  });\r\n};\r\n"],"sourceRoot":""}